{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Auction House{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .pulse-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* Desktop dropdown */
        .dropdown-menu {
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s;
        }

        .dropdown:hover .dropdown-menu,
        .dropdown-menu:hover {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown::after {
            content: '';
            position: absolute;
            top: 100%;
            right: 0;
            width: 100%;
            height: 8px;
        }

        /* Mobile menu animation */
        .mobile-menu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }

        .mobile-menu.active {
            max-height: 100vh;
        }

        /* Mobile submenu animation */
        .mobile-submenu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }

        .mobile-submenu.active {
            max-height: 500px;
        }

        /* Rotate chevron */
        .rotate-180 {
            transform: rotate(180deg);
        }

        .transition-transform {
            transition: transform 0.3s ease;
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>

<body class="bg-slate-50 font-sans antialiased">

    <!-- Top Header Bar - Hidden on mobile -->
    <div class="hidden md:block bg-slate-800 text-slate-300 px-4 md:px-6 py-2 fixed top-0 left-0 right-0 z-50">
        <div
            class="max-w-screen-2xl mx-auto flex flex-col sm:flex-row items-center justify-between text-xs md:text-sm space-y-2 sm:space-y-0">
            <div class="flex items-center space-x-3 md:space-x-6">
                <span class="flex items-center"><i class="far fa-clock mr-1 md:mr-2"></i><span
                        class="hidden sm:inline">Mon - Sat: </span> 9AM - 6PM</span>
                <span class="flex items-center"><i class="far fa-envelope mr-1 md:mr-2"></i><span
                        class="hidden lg:inline">auctionhouse@gmail.com</span><span
                        class="lg:hidden">Contact</span></span>
            </div>

            <div class="flex items-center space-x-3 md:space-x-4">
                {% if user.is_authenticated %}
                <div class="relative dropdown">
                    <button class="hover:text-white transition flex items-center">
                        <i class="far fa-user"></i>
                        <span class="ml-2 hidden sm:inline">{{ user.username }}</span>
                        <i class="fas fa-chevron-down ml-1 text-xs"></i>
                    </button>

                    <div
                        class="dropdown-menu absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-2xl border-2 border-slate-300 overflow-hidden z-[999]">
                        <div class="bg-gradient-to-r from-purple-600 to-blue-600 px-4 py-3">
                            <p class="text-white font-bold">{{ user.get_full_name|default:user.username }}</p>
                            <p class="text-purple-100 text-xs">{{ user.email }}</p>
                        </div>

                        <a href="{% url 'profile' %}"
                            class="block px-4 py-3 text-sm text-slate-700 hover:bg-slate-100 transition-colors border-b border-slate-100">
                            <i class="fas fa-user mr-3 text-blue-600"></i>My Profile
                        </a>

                        <a href="{% url 'wallet_dashboard' %}"
                            class="block px-4 py-3 text-sm text-slate-700 hover:bg-slate-100 transition-colors border-b border-slate-100">
                            <i class="fas fa-wallet mr-3 text-green-600"></i>My Wallet
                        </a>

                        <a href="{% url 'my_bids' %}"
                            class="block px-4 py-3 text-sm text-slate-700 hover:bg-slate-100 transition-colors border-b border-slate-100">
                            <i class="fas fa-gavel mr-3 text-purple-600"></i>My Bids
                        </a>

                        <a href="{% url 'my_invoices' %}"
                            class="block px-4 py-3 text-sm text-slate-700 hover:bg-slate-100 transition-colors border-b border-slate-100">
                            <i class="fas fa-file-invoice mr-3 text-orange-600"></i>My Invoices
                        </a>

                        {% if user.is_superuser %}
                        <div class="border-t-2 border-purple-200"></div>
                        <a href=""
                            class="block px-4 py-3 text-sm text-purple-700 hover:bg-purple-50 transition-colors font-bold border-b border-slate-100">
                            <i class="fas fa-shield-alt mr-3 text-purple-600"></i>Admin Panel
                        </a>
                        {% endif %}

                        <div class="border-t-2 border-slate-200"></div>
                        <a href="{% url 'logout' %}"
                            class="block px-4 py-3 text-sm text-red-700 hover:bg-red-50 transition-colors">
                            <i class="fas fa-sign-out-alt mr-3 text-red-600"></i>Logout
                        </a>
                    </div>
                </div>
                {% else %}
                <a href="{% url 'login' %}" class="hover:text-white transition flex items-center">
                    <i class="far fa-user"></i>
                    <span class="ml-2 hidden sm:inline">Login</span>
                </a>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Main Navigation -->
    <nav class="bg-white border-b-2 border-slate-200 fixed md:top-[35px] top-0 left-0 right-0 z-40 shadow-sm">
        <div class="max-w-screen-2xl mx-auto px-4 md:px-6">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center space-x-8">
                    <a href="{% url 'home' %}" class="flex items-center py-4">
                        <i class="fas fa-gavel text-purple-600 text-2xl md:text-3xl mr-2 md:mr-3"></i>
                        <div>
                            <span class="font-black text-xl md:text-2xl text-slate-900">AUCTION</span>
                            <span class="font-black text-xl md:text-2xl text-purple-600">HOUSE</span>
                        </div>
                    </a>

                    <!-- Desktop Navigation Links -->
                    <div class="hidden lg:flex items-center space-x-6">
                        <a href="{% url 'home' %}"
                            class="text-slate-700 hover:text-purple-600 font-semibold py-4 border-b-2 border-transparent hover:border-purple-600 transition">
                            Home
                        </a>
                        <a href="{% url 'auctions' %}"
                            class="text-slate-700 hover:text-purple-600 font-semibold py-4 border-b-2 border-transparent hover:border-purple-600 transition">
                            Auctions
                        </a>
                        <a href="{% url 'view_lots' %}"
                            class="text-slate-700 hover:text-purple-600 font-semibold py-4 border-b-2 border-transparent hover:border-purple-600 transition">
                            Lots
                        </a>
                        <a href="{% url 'won_lots' %}"
                            class="text-slate-700 hover:text-purple-600 font-semibold py-4 border-b-2 border-transparent hover:border-purple-600 transition">
                            Won Lots
                        </a>
                    </div>
                </div>

                <!-- Right Side: Search & Hamburger -->
                <div class="flex items-center space-x-2 md:space-x-4">
                    <!-- Desktop Search -->
                    <div class="hidden md:flex items-center relative group">
                        <form action="{% url 'auctions' %}" method="GET" class="flex items-center">
                            <input type="text" name="q" id="globalSearchInput" placeholder="Search auctions, lots..."
                                class="px-4 py-2 border-2 border-slate-300 rounded-l-lg focus:outline-none focus:border-purple-600 w-48 lg:w-64"
                                autocomplete="off">
                            <button type="submit"
                                class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-r-lg transition">
                                <i class="fas fa-search"></i>
                            </button>
                        </form>

                        <!-- Search Dropdown Results -->
                        <div id="globalSearchResults"
                            class="absolute top-full left-0 right-0 bg-white rounded-lg shadow-2xl border border-slate-100 mt-2 hidden z-[100]">
                            <!-- Results loaded here via JS -->
                        </div>
                    </div>

                    <!-- Mobile Search Icon -->
                    <button class="md:hidden text-slate-700 hover:text-purple-600" onclick="toggleMobileSearch()">
                        <i class="fas fa-search text-xl"></i>
                    </button>

                    <!-- Hamburger Menu Button -->
                    <button class="lg:hidden text-slate-700 hover:text-purple-600" onclick="toggleMobileMenu()">
                        <i class="fas fa-bars text-2xl" id="hamburger-icon"></i>
                    </button>
                </div>
            </div>

            <!-- Mobile Search Bar -->
            <div id="mobile-search" class="md:hidden pb-4 hidden">
                <form action="{% url 'auctions' %}" method="GET" class="flex items-center">
                    <input type="text" name="q" placeholder="Search auctions, lots..."
                        class="flex-1 px-4 py-2 border-2 border-slate-300 rounded-l-lg focus:outline-none focus:border-purple-600">
                    <button type="submit"
                        class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-r-lg transition">
                        <i class="fas fa-search"></i>
                    </button>
                </form>
            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu" class="mobile-menu lg:hidden bg-white border-t border-slate-200">
                <div class="py-4 space-y-2">
                    <!-- Contact Info (from top bar) -->
                    <div class="px-4 py-2 bg-slate-50 border-b border-slate-200">
                        <div class="flex items-center text-xs text-slate-600 mb-2">
                            <i class="far fa-clock mr-2"></i>
                            <span>Mon - Sat: 9AM - 6PM</span>
                        </div>
                        <div class="flex items-center text-xs text-slate-600">
                            <i class="far fa-envelope mr-2"></i>
                            <span>auctionhouse@gmail.com</span>
                        </div>
                    </div>

                    <!-- Navigation Links -->
                    <a href="{% url 'home' %}"
                        class="block px-4 py-3 text-slate-700 hover:bg-purple-50 hover:text-purple-600 font-semibold transition">
                        <i class="fas fa-home mr-3 text-purple-600"></i>Home
                    </a>
                    <a href="{% url 'auctions' %}"
                        class="block px-4 py-3 text-slate-700 hover:bg-purple-50 hover:text-purple-600 font-semibold transition">
                        <i class="fas fa-gavel mr-3 text-purple-600"></i>Auctions
                    </a>
                    <a href="{% url 'view_lots' %}"
                        class="block px-4 py-3 text-slate-700 hover:bg-purple-50 hover:text-purple-600 font-semibold transition">
                        <i class="fas fa-list mr-3 text-purple-600"></i>Lots
                    </a>
                    <a href="{% url 'won_lots' %}"
                        class="block px-4 py-3 text-slate-700 hover:bg-purple-50 hover:text-purple-600 font-semibold transition">
                        <i class="fas fa-list mr-3 text-purple-600"></i>Won Lots
                    </a>

                    {% if user.is_authenticated %}
                    <!-- User Account Dropdown -->
                    <div class="border-t border-slate-200 mt-2 pt-2">
                        <button onclick="toggleMobileSubmenu()"
                            class="w-full px-4 py-3 text-left text-slate-700 hover:bg-purple-50 font-semibold transition flex items-center justify-between">
                            <span>
                                <i class="far fa-user mr-3 text-purple-600"></i>{{ user.username }}
                            </span>
                            <i class="fas fa-chevron-down text-sm transition-transform" id="submenu-icon"></i>
                        </button>

                        <div id="mobile-submenu" class="mobile-submenu bg-slate-50">
                            <a href="{% url 'profile' %}"
                                class="block px-8 py-2.5 text-sm text-slate-700 hover:bg-slate-200 transition">
                                <i class="fas fa-user mr-3 text-blue-600"></i>My Profile
                            </a>
                            <a href="{% url 'wallet_dashboard' %}"
                                class="block px-8 py-2.5 text-sm text-slate-700 hover:bg-slate-200 transition">
                                <i class="fas fa-wallet mr-3 text-green-600"></i>My Wallet
                            </a>
                            <a href="{% url 'my_bids' %}"
                                class="block px-8 py-2.5 text-sm text-slate-700 hover:bg-slate-200 transition">
                                <i class="fas fa-gavel mr-3 text-purple-600"></i>My Bids
                            </a>
                            <a href="{% url 'my_invoices' %}"
                                class="block px-8 py-2.5 text-sm text-slate-700 hover:bg-slate-200 transition">
                                <i class="fas fa-file-invoice mr-3 text-orange-600"></i>My Invoices
                            </a>
                            {% if user.is_superuser %}
                            <a href=""
                                class="block px-8 py-2.5 text-sm text-purple-700 hover:bg-purple-100 transition font-bold">
                                <i class="fas fa-shield-alt mr-3 text-purple-600"></i>Admin Panel
                            </a>
                            {% endif %}
                        </div>
                    </div>

                    <a href="{% url 'logout' %}"
                        class="block px-4 py-3 text-red-700 hover:bg-red-50 font-semibold transition">
                        <i class="fas fa-sign-out-alt mr-3 text-red-600"></i>Logout
                    </a>
                    {% else %}
                    <div class="border-t border-slate-200 mt-2 pt-2">
                        <a href="{% url 'login' %}"
                            class="block px-4 py-3 text-slate-700 hover:bg-purple-50 hover:text-purple-600 font-semibold transition">
                            <i class="fas fa-sign-in-alt mr-3 text-purple-600"></i>Login
                        </a>
                        <a href="{% url 'register' %}"
                            class="block px-4 py-3 text-slate-700 hover:bg-purple-50 hover:text-purple-600 font-semibold transition">
                            <i class="fas fa-user-plus mr-3 text-purple-600"></i>Register
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>
    {% if messages %}
    <div class="fixed top-6 right-6 z-50 space-y-3 max-w-md">
        {% for message in messages %}
        <div class="
        px-5 py-4 rounded-lg shadow-lg backdrop-blur-sm
        transform transition-all duration-300 ease-in-out
        hover:scale-105 hover:shadow-xl
        flex items-start gap-3
        {% if message.tags == 'success' %}
            bg-green-50/95 border-l-4 border-green-500 text-green-800
        {% elif message.tags == 'info' %}
            bg-blue-50/95 border-l-4 border-blue-500 text-blue-800
        {% elif message.tags == 'warning' %}
            bg-yellow-50/95 border-l-4 border-yellow-500 text-yellow-800
        {% elif message.tags == 'error' %}
            bg-red-50/95 border-l-4 border-red-500 text-red-800
        {% else %}
            bg-slate-50/95 border-l-4 border-slate-500 text-slate-800
        {% endif %}
    ">
            <!-- Icon -->
            <div class="flex-shrink-0 mt-0.5">
                {% if message.tags == 'success' %}
                <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                        d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                        clip-rule="evenodd" />
                </svg>
                {% elif message.tags == 'info' %}
                <svg class="w-5 h-5 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                        clip-rule="evenodd" />
                </svg>
                {% elif message.tags == 'warning' %}
                <svg class="w-5 h-5 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                        d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                        clip-rule="evenodd" />
                </svg>
                {% elif message.tags == 'error' %}
                <svg class="w-5 h-5 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                        d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                        clip-rule="evenodd" />
                </svg>
                {% else %}
                <svg class="w-5 h-5 text-slate-500" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                        clip-rule="evenodd" />
                </svg>
                {% endif %}
            </div>

            <!-- Message Text -->
            <div class="flex-1 text-sm font-medium leading-relaxed">
                {{ message }}
            </div>

            <!-- Close Button -->
            <button onclick="this.parentElement.remove()"
                class="flex-shrink-0 ml-2 text-current opacity-50 hover:opacity-100 transition-opacity">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                        d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                        clip-rule="evenodd" />
                </svg>
            </button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Main Content - Adjusted padding for responsive header -->
    <main class="pt-[70px] md:pt-[106px]">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-white mt-20">
        <div class="max-w-screen-2xl mx-auto px-4 md:px-6 py-12">
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-black mb-4">AUCTION HOUSE</h3>
                    <p class="text-slate-400 text-sm">Your trusted platform for online auctions. Bid with confidence.
                    </p>
                </div>

                <div>
                    <h4 class="font-bold mb-4">Quick Links</h4>
                    <ul class="space-y-2 text-slate-400 text-sm">
                        <li><a href="{% url 'auctions' %}" class="hover:text-white transition">Auctions</a></li>
                        <li><a href="{% url 'view_lots' %}" class="hover:text-white transition">Lots</a></li>
                        <li><a href="" class="hover:text-white transition">Items</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-bold mb-4">Account</h4>
                    <ul class="space-y-2 text-slate-400 text-sm">
                        {% if user.is_authenticated %}
                        <li><a href="{% url 'profile' %}" class="hover:text-white transition">My Profile</a></li>
                        <li><a href="{% url 'wallet_dashboard' %}" class="hover:text-white transition">My Wallet</a>
                        </li>
                        <li><a href="{% url 'my_bids' %}" class="hover:text-white transition">My Bids</a></li>
                        {% else %}
                        <li><a href="{% url 'login' %}" class="hover:text-white transition">Login</a></li>
                        <li><a href="{% url 'register' %}" class="hover:text-white transition">Register</a></li>
                        {% endif %}
                    </ul>
                </div>

                <div>
                    <h4 class="font-bold mb-4">Contact</h4>
                    <ul class="space-y-2 text-slate-400 text-sm">
                        <li><i class="fas fa-envelope mr-2"></i>support@auctionhouse.com</li>
                        <li><i class="fas fa-phone mr-2"></i>+1 234 567 890</li>
                        <li><i class="fas fa-map-marker-alt mr-2"></i>123 Auction St</li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-slate-800 mt-8 pt-8 text-center text-slate-400 text-sm">
                <p>&copy; 2026 Auction House. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Toggle mobile menu
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const icon = document.getElementById('hamburger-icon');

            menu.classList.toggle('active');

            // Change hamburger icon to X when menu is open
            if (menu.classList.contains('active')) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        }

        // Toggle mobile submenu (user account dropdown)
        function toggleMobileSubmenu() {
            const submenu = document.getElementById('mobile-submenu');
            const icon = document.getElementById('submenu-icon');

            submenu.classList.toggle('active');
            icon.classList.toggle('rotate-180');
        }

        // Toggle mobile search
        function toggleMobileSearch() {
            const searchBar = document.getElementById('mobile-search');
            searchBar.classList.toggle('hidden');
        }

        // Close mobile menu when clicking outside
        document.addEventListener('click', function (event) {
            const menu = document.getElementById('mobile-menu');
            const hamburger = event.target.closest('button[onclick="toggleMobileMenu()"]');
            const menuContent = event.target.closest('#mobile-menu');

            if (!hamburger && !menuContent && menu.classList.contains('active')) {
                toggleMobileMenu();
            }
        });

        // Global Real-time Search Logic
        const globalSearchInput = document.getElementById('globalSearchInput');
        const globalSearchResults = document.getElementById('globalSearchResults');
        let searchTimer;

        if (globalSearchInput) {
            globalSearchInput.addEventListener('input', function (e) {
                const query = e.target.value.trim();
                clearTimeout(searchTimer);

                if (query.length < 2) {
                    globalSearchResults.classList.add('hidden');
                    return;
                }

                searchTimer = setTimeout(() => {
                    fetch(`{% url 'auctions' %}?q=${encodeURIComponent(query)}&format=json`, {
                        headers: { 'X-Requested-With': 'XMLHttpRequest' }
                    })
                        .then(response => response.json())
                        .then(data => {
                            if (data.results && data.results.length > 0) {
                                globalSearchResults.innerHTML = data.results.map(item => `
                                <a href="${item.url}" class="flex items-center gap-3 px-4 py-3 hover:bg-slate-50 transition-colors border-b border-slate-100 last:border-0 text-left">
                                    <div class="w-10 h-10 rounded shrink-0 bg-slate-200 overflow-hidden flex items-center justify-center">
                                        ${item.image ? `<img src="${item.image}" class="w-full h-full object-cover">` : '<i class="fas fa-gavel text-slate-400"></i>'}
                                    </div>
                                    <div>
                                        <div class="font-bold text-slate-900 text-sm line-clamp-1">${item.title}</div>
                                        <div class="text-xs text-purple-600 font-semibold">View Auction</div>
                                    </div>
                                </a>
                            `).join('');

                                // Add "View all" link
                                globalSearchResults.innerHTML += `
                                <a href="{% url 'auctions' %}?q=${encodeURIComponent(query)}" class="block px-4 py-2 text-center text-xs font-bold text-slate-500 bg-slate-50 hover:bg-slate-100 hover:text-purple-600 transition-colors uppercase tracking-wider">
                                    View All Results
                                </a>
                            `;

                                globalSearchResults.classList.remove('hidden');
                            } else {
                                globalSearchResults.classList.add('hidden');
                            }
                        })
                        .catch(error => {
                            console.error('Search error:', error);
                        });
                }, 300);
            });

            // Close dropdown on click outside
            document.addEventListener('click', function (e) {
                if (!globalSearchInput.contains(e.target) && !globalSearchResults.contains(e.target)) {
                    globalSearchResults.classList.add('hidden');
                }
            });
        }
    </script>

    {% block extra_js %}{% endblock %}
</body>

</html>