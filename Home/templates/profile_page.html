{% extends 'base.html' %}
{% load static %}
{% block title %}{{profile.user.username }} - Dashboard{% endblock %}

{% block content %}
<div
  class="min-h-screen bg-gradient-to-br from-violet-50 via-purple-50 to-fuchsia-50 py-4 sm:py-8 px-3 sm:px-4 lg:px-8">
  <div class="max-w-7xl mx-auto">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6">
      <!-- Left Sidebar -->
      <div class="lg:col-span-4 space-y-4 sm:space-y-6">
        <!-- Profile Card -->
        <div
          class="bg-white rounded-2xl shadow-lg overflow-hidden relative transform hover:shadow-2xl transition-all duration-300">
          <div class="h-24 sm:h-32 bg-gradient-to-r from-violet-600 via-purple-500 to-fuchsia-600 relative">
            <div class="absolute inset-0 bg-black opacity-10"></div>
            <div class="absolute inset-0">
              <div class="absolute inset-0 opacity-20"
                style="background-image: radial-gradient(circle at 2px 2px, white 1px, transparent 0); background-size: 20px 20px;">
              </div>
            </div>
            {% if user == profile.user %}
            <a href="{% url 'edit_profile' %}"
              class="absolute top-3 right-3 sm:top-4 sm:right-4 p-1.5 sm:p-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white transition-all rounded-lg"
              title="Edit Profile">
              <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z">
                </path>
              </svg>
            </a>
            {% endif %}
          </div>

          <div class="px-4 sm:px-6 pb-4 sm:pb-6 relative">
            <div class="relative -mt-10 sm:-mt-12 mb-3 sm:mb-4">
              <div
                class="w-20 h-20 sm:w-24 sm:h-24 rounded-2xl border-4 border-white shadow-2xl overflow-hidden bg-slate-100 mx-auto lg:mx-0">
                {% if profile.profile_image %}
                <img src="{{ profile.profile_image.url }}" alt="Profile" class="w-full h-full object-cover" />
                {% else %}
                <div
                  class="w-full h-full flex items-center justify-center bg-gradient-to-br from-violet-500 to-fuchsia-600 text-white font-bold text-2xl sm:text-3xl">
                  {{ profile.user.username|first|upper }}
                </div>
                {% endif %}
              </div>
              <div
                class="absolute bottom-0 sm:bottom-1 left-14 sm:left-16 w-5 h-5 sm:w-6 sm:h-6 bg-emerald-500 rounded-full border-2 border-white flex items-center justify-center text-white shadow-lg">
                <svg class="w-2.5 h-2.5 sm:w-3 sm:h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                </svg>
              </div>
            </div>

            <div class="text-center lg:text-left">
              <div class="flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-1 sm:gap-2 mb-1">
                <h1 class="text-lg sm:text-xl font-bold text-slate-900">
                  {{ profile.user.get_full_name|default:profile.user.username }}
                </h1>
                <span
                  class="px-2.5 py-1 text-[9px] sm:text-[10px] font-bold bg-gradient-to-r from-violet-100 to-fuchsia-100 text-violet-700 rounded-full uppercase tracking-wider">
                  BIDDER LVL 1
                </span>
              </div>
              <p class="text-xs sm:text-sm text-slate-500 font-medium mb-3 sm:mb-4">
                <i class="fas fa-calendar-alt mr-1"></i>Member since {{ profile.created_at|date:"Y" }}
              </p>

              {% if profile.bio %}
              <p
                class="text-xs sm:text-sm text-slate-600 mb-3 sm:mb-4 italic px-2 lg:px-0 bg-gradient-to-r from-violet-50 to-transparent rounded-lg py-2 pl-3">
                "{{ profile.bio }}"
              </p>
              {% endif %}

              <div class="space-y-2 text-xs sm:text-sm text-slate-600 pt-3 sm:pt-4 mt-2">
                {% if profile.phone_number %}
                <div
                  class="flex items-center justify-center lg:justify-start gap-2 hover:bg-violet-50 p-2 -mx-2 rounded-lg transition-colors">
                  <i class="fas fa-phone text-violet-400 w-4"></i>
                  <span class="break-all">{{ profile.phone_number }}</span>
                </div>
                {% endif %}

                {% if profile.user.email %}
                <div
                  class="flex items-center justify-center lg:justify-start gap-2 hover:bg-violet-50 p-2 -mx-2 rounded-lg transition-colors">
                  <i class="fas fa-envelope text-violet-400 w-4"></i>
                  <span class="break-all">{{ profile.user.email }}</span>
                </div>
                {% endif %}

                {% if profile.website %}
                <div
                  class="flex items-center justify-center lg:justify-start gap-2 hover:bg-violet-50 p-2 -mx-2 rounded-lg transition-colors">
                  <i class="fas fa-globe text-violet-400 w-4 flex-shrink-0"></i>
                  <a href="{{ profile.website }}" target="_blank" class="text-violet-600 hover:underline truncate">{{
                    profile.website }}</a>
                </div>
                {% endif %}

                {% if profile.address %}
                <div
                  class="flex items-start justify-center lg:justify-start gap-2 hover:bg-violet-50 p-2 -mx-2 rounded-lg transition-colors">
                  <i class="fas fa-map-marker-alt text-violet-400 w-4 mt-1 flex-shrink-0"></i>
                  <span class="text-left break-words">{{ profile.address }}</span>
                </div>
                {% endif %}
              </div>
            </div>
          </div>
        </div>

        <!-- Enhanced Wallet Card -->
        <div
          class="bg-gradient-to-br from-emerald-600 via-teal-600 to-cyan-700 rounded-2xl shadow-2xl p-4 sm:p-6 text-white relative overflow-hidden">
          <div
            class="absolute top-0 right-0 w-32 sm:w-40 h-32 sm:h-40 bg-white opacity-10 rounded-full -mr-16 sm:-mr-20 -mt-16 sm:-mt-20">
          </div>
          <div
            class="absolute bottom-0 left-0 w-24 sm:w-32 h-24 sm:h-32 bg-white opacity-10 rounded-full -ml-12 sm:-ml-16 -mb-12 sm:-mb-16">
          </div>

          <div class="relative z-10">
            <div class="flex justify-between items-start mb-4 sm:mb-6">
              <div>
                <h3
                  class="text-[10px] sm:text-xs font-bold uppercase tracking-wider opacity-90 mb-1 flex items-center gap-2">
                  <i class="fas fa-wallet"></i>
                  <span>MY WALLET</span>
                </h3>
                <span
                  class="bg-white/20 backdrop-blur-sm text-white rounded-full text-[9px] sm:text-[10px] px-2 sm:px-2.5 py-0.5 sm:py-1 font-bold uppercase tracking-wide">
                  ACTIVE
                </span>
              </div>
              <div
                class="w-10 h-10 sm:w-12 sm:h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                <i class="fas fa-rupee-sign text-xl sm:text-2xl"></i>
              </div>
            </div>

            <div class="mb-4 sm:mb-6 bg-white/10 rounded-xl p-3 sm:p-4 backdrop-blur-sm">
              <p class="text-[10px] sm:text-xs font-semibold opacity-90 mb-1 sm:mb-2 uppercase tracking-wide">Available
                Balance</p>
              <div class="text-3xl sm:text-4xl font-black tracking-tight">
                <i class="fa-solid fa-indian-rupee-sign"></i>
                <span id="walletBalance">{{ user.wallet.balance|floatformat:0|default:"0" }}</span>
              </div>
              <p class="text-[10px] sm:text-xs opacity-75 mt-1 sm:mt-2">
                <i class="fas fa-shield-alt mr-1"></i>Secured & Protected
              </p>
            </div>

            <div class="grid grid-cols-2 gap-2 sm:gap-3">
              <button onclick="openAddFundsModal()"
                class="bg-white text-emerald-600 rounded-xl py-2 sm:py-3 px-3 sm:px-4 font-bold text-xs sm:text-sm hover:bg-emerald-50 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 flex items-center justify-center gap-1 sm:gap-2">
                <i class="fas fa-plus-circle text-sm sm:text-base"></i>
                <span>ADD FUNDS</span>
              </button>
              <button onclick="openWithdrawModal()"
                class="bg-white/20 backdrop-blur-sm rounded-xl py-2 sm:py-3 px-3 sm:px-4 font-bold text-xs sm:text-sm hover:bg-white/30 transition-all flex items-center justify-center gap-1 sm:gap-2">
                <i class="fas fa-arrow-up text-sm sm:text-base"></i>
                <span>WITHDRAW</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Wallet Statistics -->
        <div class="bg-white rounded-2xl shadow-lg p-4 sm:p-6">
          <h3
            class="text-xs sm:text-sm font-bold text-slate-900 mb-3 sm:mb-4 flex items-center gap-2 uppercase tracking-wide">
            <div
              class="w-8 h-8 bg-gradient-to-br from-violet-500 to-fuchsia-500 rounded-lg flex items-center justify-center">
              <i class="fas fa-chart-line text-white text-xs"></i>
            </div>
            WALLET ACTIVITY
          </h3>
          <div class="space-y-3 sm:space-y-4">
            <div
              class="flex items-center justify-between p-2.5 sm:p-3 bg-gradient-to-r from-violet-50 to-purple-50 rounded-xl hover:shadow-md transition-all">
              <div class="flex items-center gap-2 sm:gap-3">
                <div
                  class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-violet-500 to-purple-500 rounded-lg flex items-center justify-center flex-shrink-0 shadow-md">
                  <i class="fas fa-arrow-down text-white text-sm sm:text-base"></i>
                </div>
                <div>
                  <p class="text-[10px] sm:text-xs text-slate-600 font-semibold uppercase tracking-wide">Total Deposits
                  </p>
                  <p class="text-base sm:text-lg font-black text-slate-900">‚Çπ0</p>
                </div>
              </div>
            </div>

            <div
              class="flex items-center justify-between p-2.5 sm:p-3 bg-gradient-to-r from-rose-50 to-pink-50 rounded-xl hover:shadow-md transition-all">
              <div class="flex items-center gap-2 sm:gap-3">
                <div
                  class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-rose-500 to-pink-500 rounded-lg flex items-center justify-center flex-shrink-0 shadow-md">
                  <i class="fas fa-gavel text-white text-sm sm:text-base"></i>
                </div>
                <div>
                  <p class="text-[10px] sm:text-xs text-slate-600 font-semibold uppercase tracking-wide">Total Bids</p>
                  <p class="text-base sm:text-lg font-black text-slate-900">‚Çπ0</p>
                </div>
              </div>
            </div>

            <div
              class="flex items-center justify-between p-2.5 sm:p-3 bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl hover:shadow-md transition-all">
              <div class="flex items-center gap-2 sm:gap-3">
                <div
                  class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-amber-500 to-orange-500 rounded-lg flex items-center justify-center flex-shrink-0 shadow-md">
                  <i class="fas fa-arrow-up text-white text-sm sm:text-base"></i>
                </div>
                <div>
                  <p class="text-[10px] sm:text-xs text-slate-600 font-semibold uppercase tracking-wide">Withdrawals</p>
                  <p class="text-base sm:text-lg font-black text-slate-900">‚Çπ0</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
          <div class="p-3 sm:p-4 bg-gradient-to-r from-violet-50 to-fuchsia-50">
            <h3
              class="text-[10px] sm:text-xs font-bold text-slate-900 uppercase tracking-wider flex items-center gap-2">
              <div
                class="w-6 h-6 bg-gradient-to-br from-violet-500 to-fuchsia-500 rounded-lg flex items-center justify-center">
                <i class="fas fa-bolt text-white text-xs"></i>
              </div>
              QUICK ACTIONS
            </h3>
          </div>
          <div class="divide-y divide-slate-100">
            <a href=""
              class="flex items-center justify-between px-3 sm:px-4 py-2.5 sm:py-3 hover:bg-gradient-to-r hover:from-violet-50 hover:to-transparent transition-all group">
              <div class="flex items-center gap-2 sm:gap-3">
                <div
                  class="w-7 h-7 sm:w-8 sm:h-8 bg-violet-100 text-violet-600 rounded-lg flex items-center justify-center group-hover:bg-gradient-to-br group-hover:from-violet-500 group-hover:to-purple-500 group-hover:text-white transition-all flex-shrink-0 shadow-sm">
                  <i class="fas fa-history text-xs sm:text-sm"></i>
                </div>
                <span class="text-xs sm:text-sm font-semibold text-slate-700 uppercase tracking-wide">Transaction
                  History</span>
              </div>
              <svg
                class="w-3.5 h-3.5 sm:w-4 sm:h-4 text-slate-400 flex-shrink-0 group-hover:text-violet-600 group-hover:translate-x-1 transition-all"
                fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>

            <a href="#"
              class="flex items-center justify-between px-3 sm:px-4 py-2.5 sm:py-3 hover:bg-gradient-to-r hover:from-violet-50 hover:to-transparent transition-all group">
              <div class="flex items-center gap-2 sm:gap-3">
                <div
                  class="w-7 h-7 sm:w-8 sm:h-8 bg-violet-100 text-violet-600 rounded-lg flex items-center justify-center group-hover:bg-gradient-to-br group-hover:from-violet-500 group-hover:to-purple-500 group-hover:text-white transition-all flex-shrink-0 shadow-sm">
                  <i class="fas fa-credit-card text-xs sm:text-sm"></i>
                </div>
                <span class="text-xs sm:text-sm font-semibold text-slate-700 uppercase tracking-wide">Payment
                  Methods</span>
              </div>
              <svg
                class="w-3.5 h-3.5 sm:w-4 sm:h-4 text-slate-400 flex-shrink-0 group-hover:text-violet-600 group-hover:translate-x-1 transition-all"
                fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>

            <a href="#"
              class="flex items-center justify-between px-3 sm:px-4 py-2.5 sm:py-3 hover:bg-gradient-to-r hover:from-violet-50 hover:to-transparent transition-all group">
              <div class="flex items-center gap-2 sm:gap-3">
                <div
                  class="w-7 h-7 sm:w-8 sm:h-8 bg-violet-100 text-violet-600 rounded-lg flex items-center justify-center group-hover:bg-gradient-to-br group-hover:from-violet-500 group-hover:to-purple-500 group-hover:text-white transition-all flex-shrink-0 shadow-sm">
                  <i class="fas fa-shield-alt text-xs sm:text-sm"></i>
                </div>
                <span class="text-xs sm:text-sm font-semibold text-slate-700 uppercase tracking-wide">Security
                  Settings</span>
              </div>
              <svg
                class="w-3.5 h-3.5 sm:w-4 sm:h-4 text-slate-400 flex-shrink-0 group-hover:text-violet-600 group-hover:translate-x-1 transition-all"
                fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>

            <a href="#"
              class="flex items-center justify-between px-3 sm:px-4 py-2.5 sm:py-3 hover:bg-gradient-to-r hover:from-violet-50 hover:to-transparent transition-all group">
              <div class="flex items-center gap-2 sm:gap-3">
                <div
                  class="w-7 h-7 sm:w-8 sm:h-8 bg-violet-100 text-violet-600 rounded-lg flex items-center justify-center group-hover:bg-gradient-to-br group-hover:from-violet-500 group-hover:to-purple-500 group-hover:text-white transition-all flex-shrink-0 shadow-sm">
                  <i class="fas fa-headset text-xs sm:text-sm"></i>
                </div>
                <span class="text-xs sm:text-sm font-semibold text-slate-700 uppercase tracking-wide">Support &
                  Help</span>
              </div>
              <svg
                class="w-3.5 h-3.5 sm:w-4 sm:h-4 text-slate-400 flex-shrink-0 group-hover:text-violet-600 group-hover:translate-x-1 transition-all"
                fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>
          </div>
        </div>
      </div>

      <!-- Main Content Area -->
      <div class="lg:col-span-8 space-y-4 sm:space-y-6">
        <div class="bg-white rounded-2xl shadow-xl min-h-[400px] sm:min-h-[600px] flex flex-col overflow-hidden">

          <!-- Mobile Dropdown Tab Navigation -->
          <div class="block md:hidden bg-gradient-to-r from-violet-50 to-fuchsia-50 p-3">
            <div class="relative mobile-tab-wrapper">
              <select id="mobileTabSelect"
                class="w-full px-4 py-3 pr-12 rounded-xl bg-white shadow-md text-sm font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-violet-500 appearance-none cursor-pointer transition-all duration-300 hover:shadow-lg">
                <option value="activity" selected>üìä OVERVIEW</option>
                <option value="bids">üî® MY BIDS</option>
                <option value="transactions">üí≥ TRANSACTIONS</option>
                <option value="won">üèÜ WON ITEMS</option>
                <option value="my_items">üì¶ MY ITEMS</option>
              </select>
              <div
                class="absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none transition-transform duration-300"
                id="dropdownIcon">
                <svg class="w-5 h-5 text-violet-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </div>
            </div>
          </div>

          <!-- Desktop Tab Navigation -->
          <div class="hidden md:block bg-gradient-to-r from-violet-50 to-fuchsia-50">
            <nav class="flex px-4 space-x-2" aria-label="Tabs">
              <button
                class="tab-button active py-4 px-4 text-sm font-bold whitespace-nowrap text-violet-600 border-b-4 border-violet-600 rounded-t-lg uppercase tracking-wide"
                data-tab="activity">
                <i class="fas fa-chart-pie mr-2"></i>OVERVIEW
              </button>
              <button
                class="tab-button py-4 px-4 text-sm font-bold whitespace-nowrap text-slate-500 border-b-4 border-transparent hover:text-slate-700 hover:border-slate-300 hover:bg-white/50 rounded-t-lg uppercase tracking-wide transition-all"
                data-tab="bids">
                <i class="fas fa-gavel mr-2"></i>MY BIDS
              </button>
              <button
                class="tab-button py-4 px-4 text-sm font-bold whitespace-nowrap text-slate-500 border-b-4 border-transparent hover:text-slate-700 hover:border-slate-300 hover:bg-white/50 rounded-t-lg uppercase tracking-wide transition-all"
                data-tab="transactions">
                <i class="fas fa-exchange-alt mr-2"></i>TRANSACTIONS
              </button>
              <button
                class="tab-button py-4 px-4 text-sm font-bold whitespace-nowrap text-slate-500 border-b-4 border-transparent hover:text-slate-700 hover:border-slate-300 hover:bg-white/50 rounded-t-lg uppercase tracking-wide transition-all"
                data-tab="won">
                <i class="fas fa-trophy mr-2"></i>WON ITEMS
              </button>
              <button
                class="tab-button py-4 px-4 text-sm font-bold whitespace-nowrap text-slate-500 border-b-4 border-transparent hover:text-slate-700 hover:border-slate-300 hover:bg-white/50 rounded-t-lg uppercase tracking-wide transition-all"
                data-tab="my_items">
                <i class="fas fa-box mr-2"></i>MY ITEMS
              </button>
            </nav>
          </div>

          <div class="p-3 sm:p-6 flex-1 overflow-auto">
            <!-- Overview Tab -->
            <div id="activity" class="tab-content active space-y-4 sm:space-y-6">
              <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-4 sm:mb-6">
                <div
                  class="bg-gradient-to-br from-violet-600 to-purple-700 rounded-2xl p-4 sm:p-5 text-white shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-1">
                  <div class="flex items-center justify-between mb-2 sm:mb-3">
                    <div
                      class="w-10 h-10 sm:w-12 sm:h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                      <i class="fas fa-gavel text-lg sm:text-2xl"></i>
                    </div>
                    <span
                      class="text-[9px] sm:text-xs bg-white/20 backdrop-blur-sm rounded-full px-2 sm:px-2.5 py-0.5 sm:py-1 font-bold uppercase tracking-wide">ACTIVE</span>
                  </div>
                  <div class="text-2xl sm:text-3xl font-black counter"
                    data-target="{{ bids.paginator.count|default:0 }}">0</div>
                  <div class="text-[10px] sm:text-xs font-bold opacity-90 uppercase mt-1 tracking-wider">TOTAL BIDS
                  </div>
                </div>

                <div
                  class="bg-gradient-to-br from-emerald-600 to-teal-700 rounded-2xl p-4 sm:p-5 text-white shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-1">
                  <div class="flex items-center justify-between mb-2 sm:mb-3">
                    <div
                      class="w-10 h-10 sm:w-12 sm:h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                      <i class="fas fa-trophy text-lg sm:text-2xl"></i>
                    </div>
                    <span
                      class="text-[9px] sm:text-xs bg-white/20 backdrop-blur-sm rounded-full px-2 sm:px-2.5 py-0.5 sm:py-1 font-bold uppercase tracking-wide">WON</span>
                  </div>
                  <div class="text-2xl sm:text-3xl font-black counter" data-target="{{ won_items.count|default:0 }}">0
                  </div>
                  <div class="text-[10px] sm:text-xs font-bold opacity-90 uppercase mt-1 tracking-wider">AUCTIONS WON
                  </div>
                </div>

                <div
                  class="bg-gradient-to-br from-amber-600 to-orange-700 rounded-2xl p-4 sm:p-5 text-white shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-1">
                  <div class="flex items-center justify-between mb-2 sm:mb-3">
                    <div
                      class="w-10 h-10 sm:w-12 sm:h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                      <i class="fas fa-clock text-lg sm:text-2xl"></i>
                    </div>
                    <span
                      class="text-[9px] sm:text-xs bg-white/20 backdrop-blur-sm rounded-full px-2 sm:px-2.5 py-0.5 sm:py-1 font-bold uppercase tracking-wide">PENDING</span>
                  </div>
                  <div class="text-2xl sm:text-3xl font-black counter" data-target="0">0</div>
                  <div class="text-[10px] sm:text-xs font-bold opacity-90 uppercase mt-1 tracking-wider">PENDING PAYMENT
                  </div>
                </div>
              </div>

              <!-- Quick Start Guide -->
              <div class="bg-gradient-to-r from-violet-50 to-fuchsia-50 rounded-2xl p-4 sm:p-6 shadow-lg">
                <h3
                  class="text-base sm:text-lg font-bold text-slate-900 mb-3 sm:mb-4 flex items-center gap-2 uppercase tracking-wide">
                  <div
                    class="w-8 h-8 bg-gradient-to-br from-violet-500 to-fuchsia-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-rocket text-white text-sm"></i>
                  </div>
                  GET STARTED WITH BIDDING
                </h3>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4">
                  <div
                    class="bg-white rounded-xl p-3 sm:p-4 shadow-md hover:shadow-lg transition-all transform hover:-translate-y-1">
                    <div
                      class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-violet-500 to-purple-500 rounded-lg flex items-center justify-center mb-2 sm:mb-3 shadow-md">
                      <span class="text-white font-black text-sm sm:text-base">1</span>
                    </div>
                    <h4 class="font-bold text-slate-900 text-sm sm:text-base mb-1 uppercase tracking-wide">Add Funds
                    </h4>
                    <p class="text-[10px] sm:text-xs text-slate-600">Load money into your wallet to start bidding</p>
                  </div>
                  <div
                    class="bg-white rounded-xl p-3 sm:p-4 shadow-md hover:shadow-lg transition-all transform hover:-translate-y-1">
                    <div
                      class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-fuchsia-500 to-pink-500 rounded-lg flex items-center justify-center mb-2 sm:mb-3 shadow-md">
                      <span class="text-white font-black text-sm sm:text-base">2</span>
                    </div>
                    <h4 class="font-bold text-slate-900 text-sm sm:text-base mb-1 uppercase tracking-wide">Browse
                      Auctions</h4>
                    <p class="text-[10px] sm:text-xs text-slate-600">Find items you're interested in bidding on</p>
                  </div>
                  <div
                    class="bg-white rounded-xl p-3 sm:p-4 shadow-md hover:shadow-lg transition-all transform hover:-translate-y-1">
                    <div
                      class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-rose-500 to-pink-500 rounded-lg flex items-center justify-center mb-2 sm:mb-3 shadow-md">
                      <span class="text-white font-black text-sm sm:text-base">3</span>
                    </div>
                    <h4 class="font-bold text-slate-900 text-sm sm:text-base mb-1 uppercase tracking-wide">Place Bids
                    </h4>
                    <p class="text-[10px] sm:text-xs text-slate-600">Start bidding and win amazing items</p>
                  </div>
                </div>
              </div>

              <div class="text-center py-8 sm:py-12">
                <div
                  class="w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-violet-100 to-fuchsia-100 rounded-2xl flex items-center justify-center mx-auto mb-3 sm:mb-4 shadow-lg">
                  <i class="fas fa-hand-pointer text-violet-600 text-2xl sm:text-3xl"></i>
                </div>
                <h3 class="text-lg sm:text-xl font-bold text-slate-900 mb-2 uppercase tracking-wide">Ready to Start
                  Bidding?</h3>
                <p class="text-slate-500 text-xs sm:text-sm mb-4 sm:mb-6 max-w-md mx-auto px-4">
                  Explore our active auctions and place your bids on amazing items
                </p>
                <a href="{% url 'all_auction' %}"
                  class="inline-flex items-center px-5 sm:px-6 py-2.5 sm:py-3 text-xs sm:text-sm font-bold text-white bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-700 hover:to-fuchsia-700 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all uppercase tracking-wide">
                  <i class="fas fa-search mr-2"></i>
                  BROWSE AUCTIONS
                </a>
              </div>
            </div>

            <!-- My Bids Tab -->
            <div id="bids" class="tab-content hidden">
              {% if bids %}
              <div class="flex justify-end mb-4">
                <a href="{% url 'download_invoice' %}"
                  class="inline-flex items-center px-4 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm font-bold text-white bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-700 hover:to-fuchsia-700 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all uppercase tracking-wide">
                  <i class="fas fa-download mr-2"></i>
                  <span class="hidden sm:inline">DOWNLOAD BID HISTORY</span>
                  <span class="sm:hidden">DOWNLOAD</span>
                </a>
              </div>

              <!-- Mobile Card View -->
              <div class="block md:hidden space-y-3">
                {% for bid in bids %}
                <div
                  class="bg-white {% if bid.is_winning %}ring-2 ring-green-500{% endif %} rounded-xl p-4 hover:shadow-lg transition-shadow shadow-md">
                  <div class="flex justify-between items-start mb-3">
                    <div class="flex-1 min-w-0">
                      <h4 class="text-sm font-bold text-slate-900 mb-1 uppercase tracking-wide truncate">{{
                        bid.lot.title }}</h4>
                      <p class="text-xs text-slate-500 truncate">{{ bid.lot.auction.title }}</p>
                    </div>
                    {% if bid.is_winning %}
                    <span
                      class="inline-flex items-center gap-1 px-2 py-1 text-[10px] font-bold bg-green-100 text-green-800 ml-2 flex-shrink-0 rounded-full uppercase tracking-wide whitespace-nowrap">
                      <i class="fas fa-crown"></i>
                      <span>WINNING</span>
                    </span>
                    {% else %}
                    <span
                      class="inline-flex items-center px-2 py-1 text-[10px] font-bold bg-slate-100 text-slate-600 ml-2 flex-shrink-0 rounded-full uppercase tracking-wide whitespace-nowrap">
                      OUTBID
                    </span>
                    {% endif %}
                  </div>
                  <div class="flex justify-between items-center pt-3 border-t border-slate-200">
                    <div>
                      <p class="text-[10px] text-slate-500 uppercase font-bold tracking-wider">Bid Amount</p>
                      <p class="text-sm font-black text-slate-900">‚Çπ{{ bid.amount|floatformat:2 }}</p>
                    </div>
                    <div class="text-right">
                      <p class="text-[10px] text-slate-500 uppercase font-bold tracking-wider">Date</p>
                      <p class="text-xs text-slate-600 font-semibold">{{ bid.timestamp|date:"M d, Y" }}</p>
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>

              <!-- Desktop Table View -->
              <div class="hidden md:block overflow-x-auto rounded-xl shadow-lg">
                <table class="min-w-full">
                  <thead class="bg-gradient-to-r from-violet-50 to-fuchsia-50">
                    <tr>
                      <th class="px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider">LOT
                        DETAILS</th>
                      <th class="px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider">BID
                        AMOUNT</th>
                      <th class="px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider">DATE
                      </th>
                      <th class="px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider">STATUS
                      </th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y divide-slate-100">
                    {% for bid in bids %}
                    <tr class="hover:bg-violet-50 transition-colors {% if bid.is_winning %}bg-green-50{% endif %}">
                      <td class="px-6 py-4">
                        <div class="text-sm font-bold text-slate-900 uppercase tracking-wide">{{ bid.lot.title }}</div>
                        <div class="text-xs text-slate-500">{{ bid.lot.auction.title }}</div>
                      </td>
                      <td class="px-6 py-4">
                        <div class="text-sm font-black text-slate-900">‚Çπ{{ bid.amount|floatformat:2 }}</div>
                      </td>
                      <td class="px-6 py-4">
                        <div class="text-xs text-slate-500 font-semibold">{{ bid.timestamp|date:"M d, Y H:i" }}</div>
                      </td>
                      <td class="px-6 py-4">
                        {% if bid.is_winning %}
                        <span
                          class="inline-flex items-center gap-1 px-2.5 py-1 text-xs font-bold bg-green-100 text-green-800 rounded-full uppercase tracking-wide">
                          <i class="fas fa-crown"></i>
                          <span>WINNING</span>
                        </span>
                        {% else %}
                        <span
                          class="inline-flex items-center px-2.5 py-1 text-xs font-bold bg-slate-100 text-slate-600 rounded-full uppercase tracking-wide">
                          OUTBID
                        </span>
                        {% endif %}
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>

              <!-- Pagination for Bids -->
              {% if bids.has_other_pages %}
              <div
                class="flex items-center justify-between border-t border-slate-200 bg-white px-4 py-3 sm:px-6 mt-4 rounded-xl shadow-sm">
                <div class="flex flex-1 justify-between sm:hidden">
                  {% if bids.has_previous %}
                  <a href="?bids_page={{ bids.previous_page_number }}&tab=bids"
                    class="relative inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50">Previous</a>
                  {% endif %}
                  {% if bids.has_next %}
                  <a href="?bids_page={{ bids.next_page_number }}&tab=bids"
                    class="relative ml-3 inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50">Next</a>
                  {% endif %}
                </div>
                <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
                  <div>
                    <p class="text-sm text-slate-700">
                      Showing <span class="font-bold">{{ bids.start_index }}</span> to <span class="font-bold">{{
                        bids.end_index }}</span> of <span class="font-bold">{{ bids.paginator.count }}</span> results
                    </p>
                  </div>
                  <div>
                    <nav class="isolate inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
                      {% if bids.has_previous %}
                      <a href="?bids_page={{ bids.previous_page_number }}&tab=bids"
                        class="relative inline-flex items-center rounded-l-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 focus:z-20 focus:outline-offset-0">
                        <span class="sr-only">Previous</span>
                        <i class="fas fa-chevron-left h-5 w-5"></i>
                      </a>
                      {% endif %}
                      <span
                        class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-slate-700 ring-1 ring-inset ring-slate-300 focus:outline-offset-0">
                        Page {{ bids.number }} of {{ bids.paginator.num_pages }}
                      </span>
                      {% if bids.has_next %}
                      <a href="?bids_page={{ bids.next_page_number }}&tab=bids"
                        class="relative inline-flex items-center rounded-r-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 focus:z-20 focus:outline-offset-0">
                        <span class="sr-only">Next</span>
                        <i class="fas fa-chevron-right h-5 w-5"></i>
                      </a>
                      {% endif %}
                    </nav>
                  </div>
                </div>
              </div>
              {% endif %}

              {% else %}
              <div class="flex flex-col items-center justify-center h-full text-center py-8 sm:py-12">
                <div
                  class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-violet-100 to-fuchsia-100 rounded-2xl flex items-center justify-center mb-3 sm:mb-4 shadow-lg">
                  <i class="fas fa-gavel text-violet-600 text-xl sm:text-2xl"></i>
                </div>
                <h3 class="text-lg sm:text-xl font-bold text-slate-900 mb-2 uppercase tracking-wide">No Active Bids</h3>
                <p class="text-slate-500 text-xs sm:text-sm mb-4 sm:mb-6 px-4">Jump into the action to see your bids
                  here.</p>
                <a href="{% url 'all_auction' %}"
                  class="inline-flex items-center px-4 sm:px-5 py-2 sm:py-2.5 bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-700 hover:to-fuchsia-700 text-white text-xs sm:text-sm font-bold transition-all shadow-md hover:shadow-lg rounded-xl uppercase tracking-wide">
                  <i class="fas fa-plus mr-2"></i>
                  START BIDDING
                </a>
              </div>
              {% endif %}
            </div>

            <!-- Transactions Tab -->
            <div id="transactions" class="tab-content hidden">
              <div class="mb-4 sm:mb-6">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3 sm:mb-4 gap-4">
                  <h3 class="font-bold text-slate-900 text-base sm:text-lg uppercase tracking-wide">Transaction History
                  </h3>
                  {% if transactions %}
                  <a href="{% url 'transaction_invoice' %}"
                    class="inline-flex items-center px-4 sm:px-6 py-2 sm:py-3 text-xs sm:text-sm font-bold text-white bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-700 hover:to-fuchsia-700 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all uppercase tracking-wide">
                    <i class="fas fa-download mr-2"></i>
                    <span class="hidden sm:inline">DOWNLOAD INVOICE</span>
                    <span class="sm:hidden">DOWNLOAD</span>
                  </a>
                  {% endif %}
                </div>
                <div class="bg-gradient-to-r from-violet-50 to-fuchsia-50 rounded-xl p-3 sm:p-4">
                  <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3">
                    <div>
                      <p class="text-xs sm:text-sm font-bold text-slate-700 uppercase tracking-wide">Filter Transactions
                      </p>
                      <p class="text-[10px] sm:text-xs text-slate-500">View your complete wallet activity</p>
                    </div>
                    <select
                      class="px-3 sm:px-4 py-2 rounded-lg bg-white shadow-sm text-xs sm:text-sm font-bold focus:outline-none focus:ring-2 focus:ring-violet-500 w-full sm:w-auto uppercase tracking-wide">
                      <option>ALL TRANSACTIONS</option>
                      <option>CREDITS ONLY</option>
                      <option>DEBITS ONLY</option>
                      <option>LAST 30 DAYS</option>
                    </select>
                  </div>
                </div>
              </div>

              {% if transactions %}
              <!-- Mobile Card View -->
              <div class="block md:hidden space-y-3">
                {% for transaction in transactions %}
                <div
                  class="bg-white rounded-xl p-4 hover:shadow-lg transition-shadow shadow-md {% if transaction.amount > 0 %}ring-1 ring-green-500{% else %}ring-1 ring-red-500{% endif %}">
                  <div class="flex justify-between items-start mb-3">
                    <div class="flex-1 min-w-0">
                      <p class="text-sm font-semibold text-slate-900 mb-1 uppercase tracking-wide truncate">{{
                        transaction.description }}</p>
                      <p class="text-xs text-slate-500">{{ transaction.timestamp|date:"M d, Y" }} at {{
                        transaction.timestamp|time:"H:i" }}</p>
                    </div>
                    <span class="px-2 py-1 inline-flex text-[10px] leading-5 font-bold ml-2 flex-shrink-0 rounded-full uppercase tracking-wide whitespace-nowrap
                      {% if transaction.transaction_type == 'deposit' %}bg-green-100 text-green-800
                      {% elif transaction.transaction_type == 'deduction' %}bg-red-100 text-red-800
                      {% else %}bg-slate-100 text-slate-800{% endif %}">
                      {{ transaction.get_transaction_type_display }}
                    </span>
                  </div>
                  <div class="pt-3 border-t border-slate-200">
                    {% if transaction.amount > 0 %}
                    <p class="text-base font-black text-green-600">+‚Çπ{{ transaction.amount|floatformat:2 }}</p>
                    {% else %}
                    <p class="text-base font-black text-red-600">‚Çπ{{ transaction.amount|floatformat:2 }}</p>
                    {% endif %}
                  </div>
                </div>
                {% endfor %}
              </div>

              <!-- Desktop Table View -->
              <div class="hidden md:block overflow-x-auto rounded-xl shadow-lg">
                <table class="min-w-full">
                  <thead class="bg-gradient-to-r from-violet-50 to-fuchsia-50">
                    <tr>
                      <th class="px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider">DATE &
                        TIME</th>
                      <th class="px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider">
                        DESCRIPTION</th>
                      <th class="px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider">AMOUNT
                      </th>
                      <th class="px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider">TYPE
                      </th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y divide-slate-100">
                    {% for transaction in transactions %}
                    <tr class="hover:bg-violet-50 transition-colors">
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-semibold text-slate-900">{{ transaction.timestamp|date:"M d, Y" }}
                        </div>
                        <div class="text-xs text-slate-500">{{ transaction.timestamp|time:"H:i" }}</div>
                      </td>
                      <td class="px-6 py-4">
                        <div class="text-sm text-slate-700 font-medium">{{ transaction.description }}</div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        {% if transaction.amount > 0 %}
                        <div class="text-sm font-black text-green-600">+‚Çπ{{ transaction.amount|floatformat:2 }}</div>
                        {% else %}
                        <div class="text-sm font-black text-red-600">‚Çπ{{ transaction.amount|floatformat:2 }}</div>
                        {% endif %}
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-bold rounded-full uppercase tracking-wide
                          {% if transaction.transaction_type == 'deposit' %}bg-green-100 text-green-800
                          {% elif transaction.transaction_type == 'deduction' %}bg-red-100 text-red-800
                          {% else %}bg-slate-100 text-slate-800{% endif %}">
                          {{ transaction.get_transaction_type_display }}
                        </span>
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>

              <!-- Pagination -->
              {% if transactions.has_other_pages %}
              <div
                class="flex items-center justify-between border-t border-slate-200 bg-white px-4 py-3 sm:px-6 mt-4 rounded-xl shadow-sm">
                <div class="flex flex-1 justify-between sm:hidden">
                  {% if transactions.has_previous %}
                  <a href="?trans_page={{ transactions.previous_page_number }}&tab=transactions"
                    class="relative inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50">Previous</a>
                  {% endif %}
                  {% if transactions.has_next %}
                  <a href="?trans_page={{ transactions.next_page_number }}&tab=transactions"
                    class="relative ml-3 inline-flex items-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50">Next</a>
                  {% endif %}
                </div>
                <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
                  <div>
                    <p class="text-sm text-slate-700">
                      Showing <span class="font-bold">{{ transactions.start_index }}</span> to <span
                        class="font-bold">{{ transactions.end_index }}</span> of <span class="font-bold">{{
                        transactions.paginator.count }}</span> results
                    </p>
                  </div>
                  <div>
                    <nav class="isolate inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
                      {% if transactions.has_previous %}
                      <a href="?trans_page={{ transactions.previous_page_number }}&tab=transactions"
                        class="relative inline-flex items-center rounded-l-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 focus:z-20 focus:outline-offset-0">
                        <span class="sr-only">Previous</span>
                        <i class="fas fa-chevron-left h-5 w-5"></i>
                      </a>
                      {% endif %}
                      <span
                        class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-slate-700 ring-1 ring-inset ring-slate-300 focus:outline-offset-0">
                        Page {{ transactions.number }} of {{ transactions.paginator.num_pages }}
                      </span>
                      {% if transactions.has_next %}
                      <a href="?trans_page={{ transactions.next_page_number }}&tab=transactions"
                        class="relative inline-flex items-center rounded-r-md px-2 py-2 text-slate-400 ring-1 ring-inset ring-slate-300 hover:bg-slate-50 focus:z-20 focus:outline-offset-0">
                        <span class="sr-only">Next</span>
                        <i class="fas fa-chevron-right h-5 w-5"></i>
                      </a>
                      {% endif %}
                    </nav>
                  </div>
                </div>
              </div>
              {% endif %}
              {% else %}
              <div class="flex flex-col items-center justify-center text-center py-8 sm:py-12">
                <div
                  class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-violet-100 to-fuchsia-100 rounded-2xl flex items-center justify-center mb-3 sm:mb-4 shadow-lg">
                  <i class="fas fa-inbox text-violet-600 text-xl sm:text-2xl"></i>
                </div>
                <h3 class="text-lg sm:text-xl font-bold text-slate-900 mb-2 uppercase tracking-wide">No Transactions Yet
                </h3>
                <p class="text-slate-500 text-xs sm:text-sm px-4">Your transaction history will appear here</p>
              </div>
              {% endif %}
            </div>

            <!-- Won Items Tab -->
            <div id="won" class="tab-content hidden">
              {% if won_items %}
              <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                {% for lot in won_items %}
                {% for item in lot.items.all %}
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all group">
                  <div class="relative h-40 sm:h-48 bg-slate-200 overflow-hidden">
                    {% if item.images %}
                    <img src="/media/{{ item.images.0 }}" alt="{{ item.title }}"
                      class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                    {% else %}
                    <div
                      class="flex items-center justify-center h-full bg-gradient-to-br from-violet-100 to-fuchsia-100 text-violet-400">
                      <i class="fas fa-image text-2xl sm:text-3xl"></i>
                    </div>
                    {% endif %}
                    <div
                      class="absolute top-2 sm:top-3 right-2 sm:right-3 bg-green-600 text-white text-[9px] sm:text-[10px] font-bold px-2 sm:px-2.5 py-1 shadow-lg uppercase tracking-wider rounded-full flex items-center gap-1">
                      <i class="fas fa-check-circle"></i>
                      <span>WON (LOT #{{ lot.lot_number }})</span>
                    </div>
                  </div>
                  <div class="p-3 sm:p-4">
                    <h4 class="font-bold text-slate-900 text-sm mb-1 truncate uppercase tracking-wide">{{ item.title }}
                    </h4>
                    <div class="flex justify-between items-center border-t border-slate-200 pt-2 sm:pt-3 mt-2 sm:mt-3">
                      <div>
                        <p class="text-[9px] sm:text-[10px] text-slate-400 font-bold uppercase tracking-wider">VALUE</p>
                        <p class="text-xs sm:text-sm font-black text-slate-700">‚Çπ{{ item.estimated_value }}</p>
                      </div>
                      <a href="{% url 'item_detail' item.id item.slug %}"
                        class="px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gradient-to-r from-violet-600 to-fuchsia-600 text-white text-[10px] sm:text-xs font-bold uppercase tracking-wide hover:from-violet-700 hover:to-fuchsia-700 transition-colors rounded-lg shadow-md">
                        VIEW
                      </a>
                    </div>
                  </div>
                </div>
                {% endfor %}
                {% endfor %}
              </div>
              {% else %}
              <div class="flex flex-col items-center justify-center h-full text-center py-8 sm:py-12">
                <div
                  class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-violet-100 to-fuchsia-100 rounded-2xl flex items-center justify-center mb-3 sm:mb-4 shadow-lg">
                  <i class="fas fa-trophy text-violet-600 text-xl sm:text-2xl"></i>
                </div>
                <h3 class="text-lg sm:text-xl font-bold text-slate-900 mb-2 uppercase tracking-wide">No Wins Yet</h3>
                <p class="text-slate-500 text-xs sm:text-sm mb-4 sm:mb-6 px-4">Winning items feels great. Start bidding!
                </p>
                <a href="{% url 'all_auction' %}"
                  class="inline-flex items-center px-4 sm:px-5 py-2 sm:py-2.5 bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-700 hover:to-fuchsia-700 text-white text-xs sm:text-sm font-bold transition-all shadow-md hover:shadow-lg rounded-xl uppercase tracking-wide">
                  <i class="fas fa-gavel mr-2"></i>
                  BROWSE AUCTIONS
                </a>
              </div>
              {% endif %}
            </div>

            <!-- My Items Tab -->
            <div id="my_items" class="tab-content hidden">
              <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4 mb-4 sm:mb-6 pb-4">
                <div>
                  <h3 class="font-bold text-slate-900 text-base sm:text-lg uppercase tracking-wide">My Listed Items</h3>
                  <p class="text-xs sm:text-sm text-slate-500">Manage items you have currently up for auction.</p>
                </div>
                <a href="{% url 'add_item' %}"
                  class="inline-flex items-center justify-center px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm font-bold text-white bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-700 hover:to-fuchsia-700 rounded-xl shadow-md hover:shadow-lg transition-all group uppercase tracking-wide">
                  <i class="fas fa-plus mr-2 group-hover:rotate-90 transition-transform"></i>
                  ADD NEW ITEM
                </a>
              </div>

              {% if item_list %}
              <!-- Mobile Card View -->
              <div class="block md:hidden space-y-3">
                {% for item in item_list %}
                <div
                  class="bg-white rounded-xl p-4 hover:shadow-lg transition-shadow shadow-md {% if item.status %}ring-1 ring-emerald-500{% endif %}">
                  <div class="flex justify-between items-start mb-3">
                    <div class="flex-1 min-w-0">
                      <a href="{% url 'item_detail' item.id item.slug %}"
                        class="text-sm font-bold text-violet-600 hover:text-violet-800 uppercase tracking-wide block truncate">
                        {{ item.title }}
                      </a>
                      <p class="text-xs text-slate-500 mt-1">
                        <i class="fa-solid fa-indian-rupee-sign"></i> {{ item.estimated_value }}
                      </p>
                    </div>
                    {% if item.status %}
                    <span
                      class="inline-flex items-center gap-1 px-2 py-1 text-[10px] leading-5 font-bold bg-emerald-100 text-emerald-800 rounded-full ml-2 flex-shrink-0 uppercase tracking-wide whitespace-nowrap">
                      <i class="fas fa-check-circle"></i>
                      <span>{{ item.status }}</span>
                    </span>
                    {% else %}
                    <span
                      class="inline-flex items-center px-2 py-1 text-[10px] leading-5 font-bold bg-slate-100 text-slate-800 rounded-full ml-2 flex-shrink-0 uppercase tracking-wide whitespace-nowrap">
                      INACTIVE
                    </span>
                    {% endif %}
                  </div>
                  <div class="flex gap-2 pt-3 border-t border-slate-200">
                    <a href="{% url 'edit_item' item.id %}"
                      class="flex-1 text-center text-violet-600 hover:text-violet-900 font-bold transition-colors text-xs py-2 rounded-lg hover:bg-violet-50 uppercase tracking-wide">
                      <i class="fas fa-edit mr-1"></i>EDIT
                    </a>
                    <form action="{% url 'delete_item' item.id %}" method="POST" class="flex-1"
                      onsubmit="return confirm('Are you sure you want to delete this item?');">
                      {% csrf_token %}
                      <button type="submit"
                        class="w-full text-red-600 hover:text-red-900 font-bold transition-colors text-xs py-2 rounded-lg hover:bg-red-50 uppercase tracking-wide">
                        <i class="fas fa-trash mr-1"></i>DELETE
                      </button>
                    </form>
                  </div>
                </div>
                {% endfor %}
              </div>

              <!-- Desktop Table View -->
              <div class="hidden md:block overflow-x-auto rounded-xl shadow-lg">
                <table class="min-w-full">
                  <thead class="bg-gradient-to-r from-violet-50 to-fuchsia-50">
                    <tr>
                      <th class="px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider">ITEM
                        NAME</th>
                      <th class="px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider">
                        ESTIMATED VALUE</th>
                      <th class="px-6 py-3 text-left text-xs font-bold text-slate-700 uppercase tracking-wider">STATUS
                      </th>
                      <th class="px-6 py-3 text-right text-xs font-bold text-slate-700 uppercase tracking-wider">ACTIONS
                      </th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y divide-slate-100">
                    {% for item in item_list %}
                    <tr class="hover:bg-violet-50 transition-colors">
                      <td class="px-6 py-4 whitespace-nowrap">
                        <a href="{% url 'item_detail' item.id item.slug %}"
                          class="text-sm font-bold text-violet-600 hover:text-violet-800 uppercase tracking-wide">
                          {{ item.title }}
                        </a>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-black text-slate-700">
                          <i class="fa-solid fa-indian-rupee-sign"></i> {{ item.estimated_value }}
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        {% if item.status %}
                        <span
                          class="inline-flex items-center gap-1 px-3 py-1 text-xs leading-5 font-bold bg-emerald-100 text-emerald-800 rounded-full uppercase tracking-wide">
                          <i class="fas fa-check-circle"></i>
                          <span>{{ item.status }}</span>
                        </span>
                        {% else %}
                        <span
                          class="inline-flex items-center px-3 py-1 text-xs leading-5 font-bold bg-slate-100 text-slate-800 rounded-full uppercase tracking-wide">
                          INACTIVE
                        </span>
                        {% endif %}
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <div class="flex items-center justify-end gap-3">
                          <a href="{% url 'edit_item' item.id %}"
                            class="text-violet-600 hover:text-violet-900 font-bold transition-colors uppercase tracking-wide">
                            <i class="fas fa-edit mr-1"></i>EDIT
                          </a>
                          <form action="{% url 'delete_item' item.id %}" method="POST"
                            onsubmit="return confirm('Are you sure you want to delete this item?');">
                            {% csrf_token %}
                            <button type="submit"
                              class="text-red-600 hover:text-red-900 font-bold transition-colors uppercase tracking-wide">
                              <i class="fas fa-trash mr-1"></i>DELETE
                            </button>
                          </form>
                        </div>
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
              {% else %}
              <div class="flex flex-col items-center justify-center text-center py-8 sm:py-12">
                <div
                  class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-violet-100 to-fuchsia-100 rounded-2xl flex items-center justify-center mb-3 sm:mb-4 shadow-lg">
                  <i class="fas fa-box text-violet-600 text-xl sm:text-2xl"></i>
                </div>
                <p class="text-slate-500 text-xs sm:text-sm font-bold mb-3 px-4 uppercase tracking-wide">You haven't
                  listed any items yet.</p>
                <a href="{% url 'add_item' %}"
                  class="text-violet-600 hover:text-violet-800 text-xs sm:text-sm font-bold flex items-center gap-2 uppercase tracking-wide">
                  LIST YOUR FIRST ITEM
                  <i class="fas fa-arrow-right"></i>
                </a>
              </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Add Funds Modal -->
<div id="addFundsModal"
  class="hidden fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
  <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full transform transition-all">
    <div class="p-4 sm:p-6 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-t-2xl">
      <div class="flex items-center justify-between">
        <h3 class="text-lg sm:text-xl font-bold text-slate-900 flex items-center gap-2 uppercase tracking-wide">
          <div
            class="w-8 h-8 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center">
            <i class="fas fa-plus-circle text-white"></i>
          </div>
          ADD FUNDS
        </h3>
        <button onclick="closeAddFundsModal()"
          class="text-slate-400 hover:text-slate-600 transition-colors p-2 hover:bg-white rounded-lg">
          <i class="fas fa-times text-lg sm:text-xl"></i>
        </button>
      </div>
    </div>

    <form action="{% url 'add_funds' %}" method="POST" class="p-4 sm:p-6">
      {% csrf_token %}
      <div class="mb-4 sm:mb-6">
        <label class="block text-xs sm:text-sm font-bold text-slate-700 mb-2 uppercase tracking-wide">Amount to
          Add</label>
        <div class="relative">
          <span
            class="absolute left-3 sm:left-4 top-1/2 transform -translate-y-1/2 text-slate-500 font-bold text-lg sm:text-xl">‚Çπ</span>
          <input type="number" name="amount" required min="100" step="100" placeholder="Enter amount"
            class="w-full pl-10 sm:pl-12 pr-3 sm:pr-4 py-2.5 sm:py-3 rounded-xl bg-slate-50 text-base sm:text-lg font-bold focus:outline-none focus:ring-2 focus:ring-emerald-500 transition-all">
        </div>
        <p class="text-[10px] sm:text-xs text-slate-500 mt-2"><i class="fas fa-info-circle mr-1"></i>Minimum amount:
          ‚Çπ100</p>
      </div>

      <div class="mb-4 sm:mb-6">
        <p class="text-xs sm:text-sm font-bold text-slate-700 mb-2 sm:mb-3 uppercase tracking-wide">Quick Add:</p>
        <div class="grid grid-cols-3 gap-2 sm:gap-3">
          <button type="button" onclick="setAmount(1000)"
            class="py-2 bg-slate-100 hover:bg-emerald-100 text-slate-700 hover:text-emerald-700 font-bold transition-all rounded-lg hover:shadow-md text-xs sm:text-sm uppercase tracking-wide">
            ‚Çπ1,000
          </button>
          <button type="button" onclick="setAmount(5000)"
            class="py-2 bg-slate-100 hover:bg-emerald-100 text-slate-700 hover:text-emerald-700 font-bold transition-all rounded-lg hover:shadow-md text-xs sm:text-sm uppercase tracking-wide">
            ‚Çπ5,000
          </button>
          <button type="button" onclick="setAmount(10000)"
            class="py-2 bg-slate-100 hover:bg-emerald-100 text-slate-700 hover:text-emerald-700 font-bold transition-all rounded-lg hover:shadow-md text-xs sm:text-sm uppercase tracking-wide">
            ‚Çπ10,000
          </button>
        </div>
      </div>

      <div class="bg-blue-50 rounded-xl p-3 sm:p-4 mb-4 sm:mb-6">
        <p class="text-[10px] sm:text-xs text-blue-700 font-bold">
          <i class="fas fa-shield-alt mr-1"></i>
          YOUR PAYMENT IS SECURED WITH INDUSTRY-STANDARD ENCRYPTION
        </p>
      </div>

      <button type="submit"
        class="w-full py-2.5 sm:py-3 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5 text-sm sm:text-base uppercase tracking-wide">
        <i class="fas fa-check-circle mr-2"></i>
        ADD FUNDS
      </button>
    </form>
  </div>
</div>

<!-- Withdraw Modal -->
<div id="withdrawModal"
  class="hidden fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
  <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full transform transition-all">
    <div class="p-4 sm:p-6 bg-gradient-to-r from-amber-50 to-orange-50 rounded-t-2xl">
      <div class="flex items-center justify-between">
        <h3 class="text-lg sm:text-xl font-bold text-slate-900 flex items-center gap-2 uppercase tracking-wide">
          <div
            class="w-8 h-8 bg-gradient-to-br from-amber-500 to-orange-500 rounded-lg flex items-center justify-center">
            <i class="fas fa-arrow-up text-white"></i>
          </div>
          WITHDRAW FUNDS
        </h3>
        <button onclick="closeWithdrawModal()"
          class="text-slate-400 hover:text-slate-600 transition-colors p-2 hover:bg-white rounded-lg">
          <i class="fas fa-times text-lg sm:text-xl"></i>
        </button>
      </div>
    </div>

    <div class="p-4 sm:p-6">
      <div class="bg-amber-50 rounded-xl p-3 sm:p-4 mb-3 sm:mb-4">
        <p class="text-xs sm:text-sm font-bold text-amber-800 mb-2 uppercase tracking-wide">
          <i class="fas fa-info-circle mr-1"></i>Withdrawal Information
        </p>
        <ul class="text-[10px] sm:text-xs text-amber-700 space-y-1">
          <li>‚Ä¢ Available Balance: ‚Çπ<span id="withdrawableBalance">{{ user.wallet.balance|floatformat:0|default:"0"
              }}</span></li>
          <li>‚Ä¢ Processing time: 2-3 business days</li>
          <li>‚Ä¢ Minimum withdrawal: ‚Çπ500</li>
        </ul>
      </div>

      <div class="mb-4 sm:mb-6">
        <label class="block text-xs sm:text-sm font-bold text-slate-700 mb-2 uppercase tracking-wide">Amount to
          Withdraw</label>
        <div class="relative">
          <span
            class="absolute left-3 sm:left-4 top-1/2 transform -translate-y-1/2 text-slate-500 font-bold text-lg sm:text-xl">‚Çπ</span>
          <input type="number" id="withdrawAmount" placeholder="Enter amount"
            class="w-full pl-10 sm:pl-12 pr-3 sm:pr-4 py-2.5 sm:py-3 rounded-xl bg-slate-50 text-base sm:text-lg font-bold focus:outline-none focus:ring-2 focus:ring-amber-500 transition-all">
        </div>
      </div>

      <button onclick="processWithdrawal()"
        class="w-full py-2.5 sm:py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5 text-sm sm:text-base uppercase tracking-wide">
        <i class="fas fa-paper-plane mr-2"></i>
        REQUEST WITHDRAWAL
      </button>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Tab Switching for Desktop
    const tabButtons = document.querySelectorAll(".tab-button");
    const tabContents = document.querySelectorAll(".tab-content");
    const mobileTabSelect = document.getElementById("mobileTabSelect");

    function activateTab(tabId) {
      // Desktop tabs
      tabButtons.forEach((btn) => {
        btn.classList.remove("text-violet-600", "border-violet-600", "active");
        btn.classList.add("text-slate-500", "border-transparent");

        if (btn.getAttribute("data-tab") === tabId) {
          btn.classList.remove("text-slate-500", "border-transparent");
          btn.classList.add("text-violet-600", "border-violet-600", "active");
        }
      });

      // Tab contents
      tabContents.forEach((content) => {
        content.classList.add("hidden");
        if (content.id === tabId) {
          content.classList.remove("hidden");
        }
      });

      // Mobile dropdown
      if (mobileTabSelect) {
        mobileTabSelect.value = tabId;
      }
    }

    // Check URL parameters for tab
    const urlParams = new URLSearchParams(window.location.search);
    const tabParam = urlParams.get('tab');
    if (tabParam) {
      activateTab(tabParam);
    }

    // Desktop tab buttons
    tabButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const targetId = button.getAttribute("data-tab");
        activateTab(targetId);

        // Update URL
        const newUrl = new URL(window.location);
        newUrl.searchParams.set('tab', targetId);
        window.history.pushState({}, '', newUrl);
      });
    });

    // Mobile dropdown with animation
    if (mobileTabSelect) {
      const dropdownIcon = document.getElementById('dropdownIcon');

      // Rotate icon on focus/blur
      mobileTabSelect.addEventListener('focus', () => {
        if (dropdownIcon) {
          dropdownIcon.style.transform = 'translateY(-50%) rotate(180deg)';
        }
        mobileTabSelect.parentElement.classList.add('dropdown-active');
      });

      mobileTabSelect.addEventListener('blur', () => {
        if (dropdownIcon) {
          dropdownIcon.style.transform = 'translateY(-50%) rotate(0deg)';
        }
        mobileTabSelect.parentElement.classList.remove('dropdown-active');
      });

      // Handle tab change
      mobileTabSelect.addEventListener("change", (e) => {
        const targetId = e.target.value;

        // Add slide animation
        const activeContent = document.querySelector('.tab-content:not(.hidden)');
        if (activeContent) {
          activeContent.style.opacity = '0';
          activeContent.style.transform = 'translateX(-20px)';
        }

        setTimeout(() => {
          activateTab(targetId);

          const newContent = document.querySelector('.tab-content:not(.hidden)');
          if (newContent) {
            newContent.style.opacity = '0';
            newContent.style.transform = 'translateX(20px)';

            setTimeout(() => {
              newContent.style.opacity = '1';
              newContent.style.transform = 'translateX(0)';
            }, 50);
          }
        }, 150);

        // Update URL
        const newUrl = new URL(window.location);
        newUrl.searchParams.set('tab', targetId);
        window.history.pushState({}, '', newUrl);
      });
    }

    // Counter Animation
    const counters = document.querySelectorAll(".counter");
    counters.forEach((counter) => {
      const target = +counter.getAttribute("data-target");
      if (target > 0) {
        let current = 0;
        const inc = Math.ceil(target / 50);
        const timer = setInterval(() => {
          current += inc;
          if (current >= target) {
            counter.innerText = target;
            clearInterval(timer);
          } else {
            counter.innerText = current;
          }
        }, 20);
      }
    });
  });

  function openAddFundsModal() {
    document.getElementById('addFundsModal').classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  }

  function closeAddFundsModal() {
    document.getElementById('addFundsModal').classList.add('hidden');
    document.body.style.overflow = 'auto';
  }

  function openWithdrawModal() {
    document.getElementById('withdrawModal').classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  }

  function closeWithdrawModal() {
    document.getElementById('withdrawModal').classList.add('hidden');
    document.body.style.overflow = 'auto';
  }

  function setAmount(amount) {
    document.querySelector('input[name="amount"]').value = amount;
  }

  function processWithdrawal() {
    const amount = document.getElementById('withdrawAmount').value;
    if (!amount || amount < 500) {
      alert('Minimum withdrawal amount is ‚Çπ500');
      return;
    }
    alert('Withdrawal request submitted successfully!');
    closeWithdrawModal();
  }

  // Close modals on escape key
  document.addEventListener('keydown', function (e) {
    if (e.key === 'Escape') {
      closeAddFundsModal();
      closeWithdrawModal();
    }
  });

  // Close modals when clicking outside
  document.getElementById('addFundsModal')?.addEventListener('click', function (e) {
    if (e.target === this) closeAddFundsModal();
  });

  document.getElementById('withdrawModal')?.addEventListener('click', function (e) {
    if (e.target === this) closeWithdrawModal();
  });
</script>

<style>
  /* Prevent horizontal scroll */
  body {
    overflow-x: hidden;
  }

  /* Ensure all containers don't overflow */
  * {
    box-sizing: border-box;
  }

  /* Smooth transitions */
  .tab-content {
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
    opacity: 1;
    transform: translateX(0);
  }

  /* Custom select styling */
  select {
    background-image: none;
  }

  /* Responsive text truncation */
  .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* Ensure grid items don't overflow */
  .grid>* {
    min-width: 0;
  }

  /* Better mobile scrolling */
  @media (max-width: 768px) {
    .overflow-auto {
      -webkit-overflow-scrolling: touch;
    }
  }

  /* Dropdown icon animation */
  #dropdownIcon {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Mobile dropdown animations */
  .mobile-tab-wrapper {
    position: relative;
  }

  .mobile-tab-wrapper.dropdown-active select {
    box-shadow: 0 10px 25px -5px rgba(139, 92, 246, 0.3), 0 8px 10px -6px rgba(139, 92, 246, 0.3);
    transform: scale(1.01);
  }

  #mobileTabSelect {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  #mobileTabSelect:focus {
    box-shadow: 0 10px 25px -5px rgba(139, 92, 246, 0.3), 0 8px 10px -6px rgba(139, 92, 246, 0.3);
  }

  /* Pulse animation for active tab indicator */
  @keyframes pulse-ring {
    0% {
      box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.5);
    }

    70% {
      box-shadow: 0 0 0 8px rgba(139, 92, 246, 0);
    }

    100% {
      box-shadow: 0 0 0 0 rgba(139, 92, 246, 0);
    }
  }

  .mobile-tab-wrapper.dropdown-active::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 0.75rem;
    animation: pulse-ring 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    pointer-events: none;
  }

  /* Smooth option appearance */
  #mobileTabSelect option {
    padding: 12px;
    transition: all 0.2s ease;
  }

  /* Ripple effect on select */
  @keyframes ripple {
    0% {
      transform: scale(0);
      opacity: 1;
    }

    100% {
      transform: scale(2);
      opacity: 0;
    }
  }

  /* Add loading state style */
  .tab-content.loading {
    opacity: 0.5;
    pointer-events: none;
  }

  /* Smooth scroll behavior */
  html {
    scroll-behavior: smooth;
  }

  /* Enhanced focus states for accessibility */
  #mobileTabSelect:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgb(139, 92, 246);
  }
</style>

{% endblock %}